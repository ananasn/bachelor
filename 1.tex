 \def\figureautorefname{рис.}
\chapter[Сравнительный анализ существующих систем\\ и предлагаемого подхода]{Сравнительный анализ существующих систем и предлагаемого подхода}
\section{Современные системы автоматизированной подготовки УП для гравировальных станков с~числовым программным управлением}
В настоящее время существует большое количество CAM-систем, однако лишь малая часть из них пригодна для получения УП для гравировальных станков. Это обуславливается тем, что CAM-системы  чаще всего работают с \mbox{3D-моделями} или векторным представлением изображения, а~большинство изображений \mbox{являются} растровыми. Таким образом, можно выделить три способа получения УП из растрового изображения:
\begin{enumerate}[1)]
\item предварительная векторизация изображения и сохранение его в формате DXF или аналогичных, затем передача полученного файла в~CAM-систему;
\item использование специализированных систем для подготовки УП для~гравировальных станков;
\item использование программного обеспечения, предлагаемого производителем станка.
\end{enumerate}
{\bfseries Первый способ.} Первый этап данного способа -- векторизация. Векторизация -- это довольно трудоемкий и сложный процесс. Степень  автоматизации этого процесса чрезвычайно низкая. Трассировка растра может \mbox{осуществляться} с~помощью специальных систем, например Scan2Cad, Corel Draw, Inkscape или WinTOPO, однако стоит отметить, что их применение не всегда целесообразно. Качественная трассировка получается только в случае очень простых изображений. Если же изображение имеет много деталей, то эти детали \mbox{теряются}\,(\autoref{fig:ras2vec}), либо происходит перегрузка изображения большим количеством пересекающихся контуров\,(\autoref{fig:ras2vec_plat}). Таким образом, в настоящее время многие специалисты предлагают услуги ручной векторизации, которая произовидится художником с помощью векторных редакторов. Стоит отметить, что стоимость таких услуг достаточно высокая.

\begin{figure}[h!]
    \centering
    \includegraphics[width=.8\textwidth]{ras2vec.png}
    \caption[Трассировка растрового изображения в программе Inkscape]
            {Трассировка растрового изображения в программе Inkscape}
    \label{fig:ras2vec}
\end{figure} 

\begin{figure}[h!]
    \centering
    \includegraphics[width=.8\textwidth]{ras2vec_plat.png}
    \caption[Трассировка растрового изображения платы в программе Inkscape]
            {Трассировка растрового изображения платы в программе Inkscape}
    \label{fig:ras2vec_plat}
\end{figure} 
Предварительная векторизация требуется для того, чтобы в  дальнейшем можно было загрузить изображение в CAM-систему\footnote{CAM -- Computer Aided Manufacturing}. Таким образом, второй этап имеет высокую степень автоматизации. Например, система PyCAM \cite{pycam_docs} принимает на вход DXF\footnote{DXF (Drawing eXchange Format) -- открытый формат файлов для обмена векторной графической информацией между приложениями САПР.} и SVG файлы\footnote{SVG (Scalable Vector Graphics) -- это векторный формат, описывающий изображения как фигуры, контуры, текст и эффекты фильтра.}. Следовательно, получив векторное изображение, можно получить и УП.

Однако такой двухэтапный подход имеет значительные недостатки:
\begin{itemize} 
\item высокая стоимость и трудоемкость векторизации;
\item потеря некоторых деталей в случае использования систем \mbox{с~функцией} трассировки;
\item необходимость использования CAM-систем, которые поддерживают форматы DXF и SVG.
\end{itemize} 
{\bfseries Второй способ.} Специализированных программных продуктов для \mbox{получения} УП для гравировальных станков не так много. На данный момент самая \mbox{используемая} система -- это ArtCAM. Для анализа ArtCAM по характеристикам качества, выбрана модель качества \mbox{программного} обеспечения, представленная в стандарте ISO/IEC~25010:2011 \cite{iso_q}. Она в~большей степени, чем остальные аналоги, отражает качественные \mbox{характеристики} с точки зрения пользователя. В ней выделено шесть показателей:
\begin{itemize}
\item функциональность;
\item надежность;
\item удобство;
\item эффективность;
\item сопровождаемость;
\item портируемость.
\end{itemize}

{\it Функциональность}. С точки зрения функциональности ArtCAM не уступает своим аналогам. Широкий набор функций позволяет легко подготовить УП для нанесения изображения. ArtCAM имеет встроенный графический редактор, который является довольно полезным инструментом, так как с его помощью можно отредактировать, например, яркость и контрастность, что в большинстве случаев позволяет нейтрализовать дефекты, порождаемые растровым представлением. Однако поддержка других функций графического редактора скорее приводит к избыточности, потому что обычно для гравировки они не столь востребованы. 

Также в ArtCAM присутствуют инструменты сглаживания \mbox{3D-модели} рельефа, что позволяет увидеть прототип будущего изделия и~отредактировать его.

{\it Надежность}.  Надежность в данной работе не будет рассмотрена, так как достоверные данные возможно получить лишь при длительном использовании системы.

{\it Удобство}. ArtCAM построена в виде традиционного десктопного приложения. Таким образом, обычный кнопочный интерфейс с~\mbox{разнообразными} панелями инструментов и полем для редактирования \mbox{является} достаточно привычным для пользователя. Тем не менее появляется и~\mbox{типичный} недостаток такого подхода -- из-за большого  количества иконок и панелей не всегда интуитивно понятно, для чего они предназначены. Ипользование системы становится невозможным без предварительного обучения и~чтения справочной документации.

{\it Эффективность}. Под эффективностью чаще всего \mbox{подразумевается} использование ресурсов. Минимальная версия ArtCAM занимает не слишком много места -- около 700\,Мб. Однако рекомендуемые характеристики для оборудования довольно высокие. Так, например, требуется процессор не ниже IntelCore\,i7 (или аналоги) и 16\,Гб RAM. Следовательно, \mbox{данная} система будет работать эффективно только на довольно дорогом оборудовании.
\newpage

{\it Сопровождаемость}. Как известно, сопровождаемость десктопных приложений -- довольно трудоемкая задача, в том числе и для пользователей. В отличие от веб-приложений, где изменения на сервере сразу доступны пользователям, для десктопного приложения потребуется скачать пакет обновлений или, так называемый патч.

{\it Портируемость}. Основной характеристикой портируемости \mbox{является} мультиплатформенность. ArtCAM поддерживает только платформу Windows, а~\mbox{именно} Windows версий 7 и 8.

Из вышесказанного следует, что ArtCAM имеет следующие \mbox{недостатки}:
\begin{itemize}
\item высокая стоимость;
\item из-за изобилия функций и настроек освоение системы требует \mbox{времени};
\item требования к оборудованию достаточно высокие, что влияет на стоимость ТПП;
\item отсутствует мультиплатформенность;
\end{itemize}

{\bfseries Третий способ}, а именно -- использование утилит предлагаемых производителем используемого станка, чаще всего имеет те же недостатки, что и второй способ. Однако такие утилиты обычно предоставляются бесплатно или частично бесплатно.

\section{Предлагаемый подход}
По результатам анализа существующих систем был сделан вывод о~том, что для упразднения недостатков необходимо изменить подход к~\mbox{генерации УП}. Предлагаемый подход состоит в применении веб-технологий, где система представляет собой веб-приложение.

Веб-приложение построено на клиент-серверной архитектуре\,(\autoref{fig:client-server}), где в качестве клиента выступает веб-браузер, а в качестве сервера~--~\mbox{веб-сервер}. 
\begin{figure}[h!]
    \centering
    \includegraphics[width=.8\textwidth]{client-server.png}
    \caption[Клиент-серверная архитектура]
            {Клиент-серверная архитектура}
    \label{fig:client-server}
\end{figure} 

Идея клиент-серверной архитектуры такова: клиент и сервер взаимодействуют друг с другом через компьютерную сеть посредством \mbox{сетевых} протоколов (для веб-приложений это протокол HTTP); клиент в соответствии с действиями пользователя посылает запросы (чаще всего это HEAD, GET и POST); сервер в~соответствии с запросами \mbox{либо} запускает какой-либо процесс, либо предоставляет доступ к своим ресурсам \mbox{в~виде данных}. На сервере хранятся статические файлы (js-файлы, \mbox{файлы} каскадных таблиц стилей, html-шаблоны, изображения и т.д), файл для запуска сервера, файл с конфигурацией сервера, файл с~\mbox{обработчиками} запросов и файлы с программами, представляющими функционал системы (программа генерации УП, программа генерации 3D-моделей и т.д). Такое жесткое разграничение логики, данных и~\mbox{обработчиков} позволяет легко отлаживать работу и вносить изменения (\autoref{app:root}).

Клиентская часть приложения -- браузер, через который пользователь имеет доступ к ресурсам сервера. Также на клиентской части можно реализовать дополнительный функционал системы -- редактор загружаемых изображений и просмотрщик 3D-моделей.

Такой подход имеет множество плюсов:
\begin{itemize}
\item мультиплатформенность;
\item мобильность;
\item экономия вычислительных ресурсов и, соответственно, затрат на оборудование;
\item отсутствие необходимости установки;
\item быстрое обновление системы.
\end{itemize}

После загрузки изображения на сервер, оно подвергается  обработке. В~большинстве систем производится векторизация, недостатки которой отмечались \mbox{ранее}. Данный способ подразумевает, что программы, хранящиеся на сервере, обрабатывают данные с пикселей, в результате чего строится 3D-модель и генерируется управляющая программа.

Такой подход позволяет сохранить все детали изображения, а \mbox{дефекты}, вызываемые растровым представлением, устранить посредством \mbox{настройки} яркости и контрастности.

\section{Результаты сравнения}
Для подведения итога приводится результирующая таблица сравнения современных систем и предлагаемого подхода.
\makeatletter
\def\@xfootnote[#1]{%
  \protected@xdef\@thefnmark{#1}%
  \@footnotemark\@footnotetext}
\makeatother
\begin{sidewaystable}[!ht]
\caption{Результирующая таблица сравнения современных систем и предлагаемого подхода}
\label{t:my}
\begin{center}
\footnotesize 
\begin{tabular}{|c|p{0.15\linewidth}|c|p{0.15\linewidth}|c|}
    \hline
  	\bf \multirow{4}{*}{Параметры}&  \centering \bf Двухэтапный способ с векторизацией изображения& \bf\multirow{4}{*}{ArtCAM} &\centering \bf \mbox{ПО для станка} (3D-Engrave Software Roland)&\bf\multirow{4}{*}{Предлагаемый подход}\\
    \hline   
    Степень автоматизации &  \centering низкая & высокая & \centeringвысокая &  высокая\\
    \hline   
    \centering  Стоимость &  \centering низкая/высокая\footnote[*]{Зависит от сложности изображения} & высокая & \centering отсутствует &  отсутствует\\
    \hline   
   Мультиплатформенность &  \centering присутствует & отсутствует &\centering отсутствует &  присутствует\\
    \hline    
    Сопровождение &  \centering отсутствует & присутствует & \centering присутствует &  присутствует\\
    \hline  
    Функциональность &  \centering широкая& широкая & \centering узкая & широкая\\
    \hline  
\end{tabular}
\normalsize
\end{center}
\end{sidewaystable}

Из \autoref{t:my} видно, что предлагаемый подход лучше по всем приведенным выше параметрам.